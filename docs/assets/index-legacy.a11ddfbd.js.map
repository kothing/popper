{"version":3,"file":"index-legacy.a11ddfbd.js","sources":["../../vite/modulepreload-polyfill","../../src/constant.ts","../../node_modules/.pnpm/wblib@1.0.12/node_modules/wblib/lib/env.js","../../node_modules/.pnpm/wblib@1.0.12/node_modules/wblib/lib/destroyable.js","../../node_modules/.pnpm/wblib@1.0.12/node_modules/wblib/lib/dom.js","../../node_modules/.pnpm/wblib@1.0.12/node_modules/wblib/lib/is.js","../../src/popflow.ts","../../node_modules/.pnpm/wblib@1.0.12/node_modules/wblib/lib/fn.js","../../demo/index.ts"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","export enum PLACEMENT {\n  T = 't',\n  TL = 'tl',\n  TR = 'tr',\n  B = 'b',\n  BL = 'bl',\n  BR = 'br',\n  L = 'l',\n  LT = 'lt',\n  LB = 'lb',\n  R = 'r',\n  RT = 'rt',\n  RB = 'rb'\n}\n","const isBrowser = typeof window !== 'undefined';\r\nconst isTouch = isBrowser && ('ontouchstart' in window || navigator.maxTouchPoints > 0);\n\nexport { isBrowser, isTouch };\n","import { isBrowser } from './env.js';\nimport { isBool } from './is.js';\n\nlet thirdOptsSupported = false;\r\nif (isBrowser) {\r\n    try {\r\n        const options = Object.defineProperty({}, 'once', { get() { thirdOptsSupported = true; } });\r\n        window.addEventListener('test', null, options);\r\n        // eslint-disable-next-line no-empty\r\n    }\r\n    catch (e) { }\r\n}\r\nclass DomListener {\r\n    constructor(node, type, handler, options) {\r\n        this.node = node;\r\n        this.type = type;\r\n        this.handler = handler;\r\n        this.options = options;\r\n        this.options = isBool(options) ? options : options ? (thirdOptsSupported && options) : false;\r\n        node.addEventListener(type, handler, this.options);\r\n    }\r\n    destroy() {\r\n        if (!this.node)\r\n            return;\r\n        this.node.removeEventListener(this.type, this.handler, this.options);\r\n        this.node = null;\r\n    }\r\n}\r\nconst destroyableMap = new Map();\r\nfunction getDestroyableMap() {\r\n    return destroyableMap;\r\n}\r\nfunction addDestroyable(key, destroyable) {\r\n    if (!destroyableMap.has(key))\r\n        destroyableMap.set(key, []);\r\n    destroyableMap.get(key).push(destroyable);\r\n    return destroyable;\r\n}\r\nfunction callAndRemoveDestroyable(key, destroyable) {\r\n    if (!destroyable)\r\n        return;\r\n    if (destroyableMap.has(key)) {\r\n        destroyableMap.set(key, destroyableMap.get(key).filter((x) => x !== destroyable));\r\n    }\r\n    destroyable.destroy();\r\n}\r\nfunction destroy(key) {\r\n    if (destroyableMap.has(key)) {\r\n        destroyableMap.get(key).forEach((item) => item.destroy());\r\n        destroyableMap.delete(key);\r\n    }\r\n}\r\nfunction addDestroyableListener(key, el, type, listener, options) {\r\n    const domListener = new DomListener(el, type, listener, options);\r\n    if (key)\r\n        addDestroyable(key, domListener);\r\n    return domListener;\r\n}\n\nexport { DomListener, addDestroyable, addDestroyableListener, callAndRemoveDestroyable, destroy, getDestroyableMap };\n","import { isString } from './is.js';\n\nconst SELECTOR_REGEX = /([\\w-]+)?(?:#([\\w-]+))?((?:\\.(?:[\\w-]+))*)/;\r\nfunction $(desc, attrs, children, classPrefix = '') {\r\n    let match = [];\r\n    if (desc)\r\n        match = SELECTOR_REGEX.exec(desc) || [];\r\n    const el = document.createElement(match[1] || 'div');\r\n    if (match[2])\r\n        el.id = match[3];\r\n    if (match[3])\r\n        el.className = match[3].replace(/\\./g, ` ${classPrefix}`).trim();\r\n    if (attrs) {\r\n        Object.keys(attrs).forEach((name) => {\r\n            const value = attrs[name];\r\n            if (value === undefined)\r\n                return;\r\n            if (name === 'selected') {\r\n                if (value) {\r\n                    el.setAttribute(name, 'true');\r\n                }\r\n            }\r\n            else {\r\n                el.setAttribute(name, value);\r\n            }\r\n        });\r\n    }\r\n    if (children) {\r\n        if (isString(children)) {\r\n            el.innerHTML = children;\r\n        }\r\n        else {\r\n            children.forEach((c) => el.appendChild(c));\r\n        }\r\n    }\r\n    return el;\r\n}\r\nfunction removeNode(node) {\r\n    if (!node)\r\n        return;\r\n    if (node.remove) {\r\n        node.remove();\r\n    }\r\n    else if (node.parentNode) {\r\n        node.parentNode.removeChild(node);\r\n    }\r\n}\r\nfunction show(node) {\r\n    node.style.display = '';\r\n}\r\nfunction hide(node) {\r\n    node.style.display = 'none';\r\n}\r\nfunction addClass(dom, cls = '', prefix = '') {\r\n    cls = cls.trim();\r\n    if (!cls)\r\n        return dom;\r\n    if (dom.classList) {\r\n        cls.split(' ').forEach((c) => dom.classList.add(prefix + c));\r\n    }\r\n    else {\r\n        const oldCls = (dom.className && dom.className.baseVal) || '';\r\n        dom.setAttribute('class', (oldCls ? `${oldCls} ` : '') + cls.split(' ').map((c) => prefix + c).join(' '));\r\n    }\r\n    return dom;\r\n}\r\nfunction removeClass(dom, cls, prefix = '') {\r\n    dom.classList.remove(prefix + cls);\r\n    return dom;\r\n}\r\nfunction containClass(dom, cls, prefix = '') {\r\n    return dom.classList.contains(prefix + cls);\r\n}\r\nfunction toggleClass(dom, cls, force, prefix = '') {\r\n    cls = prefix + cls;\r\n    if (force) {\r\n        dom.classList.add(cls);\r\n        return true;\r\n    }\r\n    if (force === false) {\r\n        dom.classList.remove(cls);\r\n        return true;\r\n    }\r\n    return dom.classList.toggle(cls, force);\r\n}\r\nconst svgNS = 'http://www.w3.org/2000/svg';\n\nexport { $, addClass, containClass, hide, removeClass, removeNode, show, svgNS, toggleClass };\n","const toString = Object.prototype.toString;\r\nfunction isString(o) {\r\n    return typeof o === 'string' || o instanceof String;\r\n}\r\nfunction isBool(o) {\r\n    return o === true || o === false || (toString.call(o) === '[object Boolean]');\r\n}\r\nfunction isFunction(o) {\r\n    return typeof o === 'function';\r\n}\r\nfunction isNumber(o) {\r\n    return typeof o === 'number' || (toString.call(o) === '[object Number]');\r\n}\r\nfunction isValidNumber(o) {\r\n    const r = isNumber(o);\r\n    if (!r)\r\n        return r;\r\n    // eslint-disable-next-line no-restricted-globals\r\n    return (!isNaN(o) && isFinite(o));\r\n}\n\nexport { isBool, isFunction, isNumber, isString, isValidNumber };\n","import {\n  addClass, Destroyable, removeClass, destroy, addDestroyable, throttle, $,\n} from 'wblib';\nimport type {\n  Position, Rect, PopFlowConfig, CssName, TransitionInfo,\n} from './type';\nimport { PLACEMENT } from './constant';\n\nfunction getConfig(config: PopFlowConfig) {\n  return {\n    container: document.body,\n    placement: PLACEMENT.T,\n    autoPlacement: true,\n    autoUpdate: true,\n    autoScroll: true,\n    translate: [0, 0],\n    ...config,\n  } as PopFlowConfig;\n}\n\nexport class PopFlow implements Destroyable {\n  el: HTMLElement;\n\n  config: PopFlowConfig;\n\n  opening = false;\n\n  isAnimation = false;\n\n  private cel: HTMLElement;\n\n  private cssName?: CssName;\n\n  private showRaf?: any;\n\n  private hideRaf?: any;\n\n  private showTransInfo?: ReturnType<typeof getTransitionInfo>;\n\n  private hideTransInfo?: ReturnType<typeof getTransitionInfo>;\n\n  private clearShow?: () => void;\n\n  private clearHide?: () => void;\n\n  private containerOF = false;\n\n  private scrollEls?: HTMLElement[];\n\n  private isTriggerEl: boolean;\n\n  private arrowEl?: HTMLElement;\n\n  private popHide = false;\n\n  private arrowHide = false;\n\n  constructor(config: PopFlowConfig) {\n    const oldContainer = config.container;\n    config = this.config = getConfig(config);\n    this.cel = $();\n    let { style } = this.cel;\n    style.position = 'absolute';\n    style.left = style.top = '0';\n    const {\n      content, container, trigger, cssName,\n    } = config;\n    const info = getContainerInfo(container!);\n    this.containerOF = config.overflowHidden == null ? info.clip : config.overflowHidden;\n    if (oldContainer && !info.position || info.position === 'static') {\n      container!.style.position = 'relative';\n    }\n\n    this.el = this.cel.appendChild($());\n    this.el.style.position = 'absolute';\n    this.el.appendChild(content);\n\n    this.isTriggerEl = trigger instanceof Element;\n    if (config.autoUpdate) {\n      const ro = new ResizeObserver(() => this.update());\n      ro.observe(content);\n      ro.observe(container!);\n      if (this.isTriggerEl) ro.observe(trigger as HTMLElement);\n      addDestroyable(this, { destroy: () => ro.disconnect() });\n    }\n\n    if (this.isTriggerEl && container && (config.autoScroll || config.closeOnScroll)) {\n      this.scrollEls = getScrollElements(trigger as HTMLElement, container);\n    }\n\n    if (config.arrow) {\n      this.arrowEl = $();\n      style = this.arrowEl.style;\n      style.position = 'absolute';\n      style.left = style.top = '0';\n      style.zIndex = '-1';\n      this.arrowEl.appendChild(config.arrow);\n      this.el.appendChild(this.arrowEl);\n    }\n\n    if (cssName) {\n      this.cssName = {\n        enterFrom: `${cssName}-enter-from`,\n        enterActive: `${cssName}-enter-active`,\n        enterTo: `${cssName}-enter-to`,\n        exitFrom: `${cssName}-exit-from`,\n        exitActive: `${cssName}-exit-active`,\n        exitTo: `${cssName}-exit-to`,\n      };\n    }\n  }\n\n  update() {\n    if (this.opening && !this.isAnimation) this.open();\n  }\n\n  destroy() {\n    const { container } = this.config;\n    if (this.opening) {\n      try {\n        container!.removeChild(this.cel);\n      } catch (e) {\n        //\n      }\n    }\n    cancelAnimationFrame(this.showRaf);\n    cancelAnimationFrame(this.hideRaf);\n    this.clearShow?.();\n    this.clearHide?.();\n    this.isAnimation = true;\n    this.opening = false;\n    this.removeScrollEv();\n    destroy(this);\n  }\n\n  open() {\n    const {\n      config, cssName, opening: showing, el, arrowEl,\n    } = this;\n    const { container, trigger } = config;\n    const fromHide = !showing;\n    if (fromHide) {\n      if (this.isAnimation) return;\n      container!.appendChild(this.cel);\n      this.scrollEls?.forEach((x) => {\n        x.addEventListener('scroll', this.onScroll, { passive: true });\n      });\n    }\n    this.opening = true;\n    const popBcr = el.getBoundingClientRect();\n    const containerBcr = container!.getBoundingClientRect();\n    const arrowBcr = arrowEl?.getBoundingClientRect();\n    let triggerBcr = trigger.getBoundingClientRect() as Rect;\n\n    if (this.isTriggerEl) {\n      triggerBcr = {\n        left: triggerBcr.left - containerBcr.left,\n        top: triggerBcr.top - containerBcr.top,\n        width: triggerBcr.width,\n        height: triggerBcr.height,\n      };\n    }\n\n    this.isAnimation = true;\n    if (fromHide && cssName) {\n      const { onBeforeEnter } = config;\n      if (onBeforeEnter) onBeforeEnter();\n      addClass(el, cssName.enterFrom);\n      this.showRaf = requestAnimationFrame(() => {\n        removeClass(el, cssName.enterFrom);\n        addClass(el, cssName.enterActive);\n        addClass(el, cssName.enterTo);\n        const info = this.getTransitionInfo(el, this.showTransInfo);\n        this.showTransInfo = info.info;\n        this.clearShow = info.clear;\n        info.promise.then(this.onShowTransitionEnd);\n      });\n    } else {\n      requestAnimationFrame(() => {\n        this.isAnimation = false;\n      });\n    }\n\n    const ret = getPopStyle(\n      config.placement!,\n      containerBcr,\n      triggerBcr,\n      popBcr,\n      config.translate!,\n      config.autoPlacement,\n      this.containerOF,\n      config.coverTrigger,\n      arrowBcr,\n      config.hideOnInvisible,\n    );\n\n    const { onBeforePosition, onOpen } = config;\n    if (onBeforePosition) onBeforePosition(ret);\n\n    if (ret.xy) {\n      if (this.popHide) {\n        this.popHide = false;\n        showDom(this.cel);\n      }\n      this.cel.style.transform = `translate3d(${ret.xy[0]}px,${ret.xy[1]}px,0)`;\n    } else if (!this.popHide) {\n      hideDom(this.cel);\n      this.popHide = true;\n    }\n    if (arrowEl) {\n      if (ret.arrowXY) {\n        if (this.arrowHide) {\n          this.arrowHide = false;\n          showDom(arrowEl);\n        }\n        arrowEl.style.transform = `translate(${ret.arrowXY[0]}px,${ret.arrowXY[1]}px)`;\n      } else if (!this.arrowHide) {\n        this.arrowHide = true;\n        hideDom(arrowEl);\n      }\n    }\n\n    if (fromHide && onOpen) onOpen();\n  }\n\n  close() {\n    if (this.isAnimation || !this.opening) return;\n    this.opening = false;\n\n    const { config, cssName, el } = this;\n    const { onClose } = config;\n    if (cssName) {\n      const { onBeforeExit } = config;\n      if (onBeforeExit) onBeforeExit();\n      addClass(el, cssName.exitFrom);\n      this.isAnimation = true;\n      this.hideRaf = requestAnimationFrame(() => {\n        removeClass(el, cssName.exitFrom);\n        addClass(el, cssName.exitActive);\n        addClass(el, cssName.exitTo);\n        const info = this.getTransitionInfo(el, this.hideTransInfo);\n        this.hideTransInfo = info.info;\n        this.clearHide = info.clear;\n        info.promise.then(this.onHideTransitionEnd);\n      });\n    } else {\n      config.container!.removeChild(this.cel);\n    }\n\n    this.removeScrollEv();\n    if (onClose) onClose();\n  }\n\n  toggle() {\n    if (this.opening) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  onScroll = throttle(() => {\n    if (this.config.closeOnScroll) {\n      this.close();\n    } else {\n      this.update();\n    }\n  });\n\n  private removeScrollEv() {\n    this.scrollEls?.forEach((x) => x.removeEventListener('scroll', this.onScroll));\n  }\n\n  private getTransitionInfo(el: Element, info?: TransitionInfo) {\n    let clear: undefined | (() => void);\n    const promise = new Promise((resolve) => {\n      const { event, timeout } = info || getTransitionInfo(el);\n      if (timeout) {\n        const fn = () => {\n          clear?.();\n          resolve(null);\n        };\n        el.addEventListener(event!, fn);\n        const timer = setTimeout(() => {\n          clear?.();\n          resolve(null);\n        }, timeout + 2);\n        clear = () => {\n          clearTimeout(timer);\n          el.removeEventListener(event!, fn);\n        };\n      } else {\n        requestAnimationFrame(resolve);\n      }\n    });\n\n    return {\n      promise,\n      clear,\n      info,\n    };\n  }\n\n  private onShowTransitionEnd = () => {\n    const { cssName, el } = this;\n    const { onEntered } = this.config;\n    removeClass(el, cssName!.enterActive);\n    removeClass(el, cssName!.enterTo);\n    this.isAnimation = false;\n    if (onEntered) onEntered();\n  };\n\n  private onHideTransitionEnd = () => {\n    const { cssName, config, el } = this;\n    const { onExited } = config;\n    config.container!.removeChild(this.cel);\n    removeClass(el, cssName!.exitActive);\n    removeClass(el, cssName!.exitTo);\n    this.isAnimation = false;\n    if (onExited) onExited();\n  };\n}\n\nfunction getPopupOffset(\n  position: PLACEMENT,\n  triggerRect: Rect,\n  popWH: Rect,\n  translate: number[],\n) {\n  switch (position) {\n    case PLACEMENT.T:\n      return [\n        triggerRect.left + triggerRect.width / 2 - popWH.width / 2 + translate[0],\n        triggerRect.top - popWH.height + translate[1],\n      ];\n    case PLACEMENT.TL:\n      return [\n        triggerRect.left + translate[0],\n        triggerRect.top - popWH.height + translate[1],\n      ];\n    case PLACEMENT.TR:\n      return [\n        triggerRect.left + triggerRect.width - popWH.width + translate[0],\n        triggerRect.top - popWH.height + translate[1],\n      ];\n    case PLACEMENT.B:\n      return [\n        triggerRect.left + triggerRect.width / 2 - popWH.width / 2 + translate[0],\n        triggerRect.top + triggerRect.height + translate[1],\n      ];\n    case PLACEMENT.BL:\n      return [\n        triggerRect.left + translate[0],\n        triggerRect.top + triggerRect.height + translate[1],\n      ];\n    case PLACEMENT.BR:\n      return [\n        triggerRect.left + triggerRect.width - popWH.width + translate[0],\n        triggerRect.top + triggerRect.height + translate[1],\n      ];\n    case PLACEMENT.L:\n      return [\n        triggerRect.left - popWH.width + translate[0],\n        triggerRect.top + triggerRect.height / 2 - popWH.height / 2 + translate[1],\n      ];\n    case PLACEMENT.LT:\n      return [\n        triggerRect.left - popWH.width + translate[0],\n        triggerRect.top + translate[1],\n      ];\n    case PLACEMENT.LB:\n      return [\n        triggerRect.left - popWH.width + translate[0],\n        triggerRect.top + triggerRect.height - popWH.height + translate[1],\n      ];\n    case PLACEMENT.R:\n      return [\n        triggerRect.left + triggerRect.width + translate[0],\n        triggerRect.top + triggerRect.height / 2 - popWH.height / 2 + translate[1],\n      ];\n    case PLACEMENT.RT:\n      return [\n        triggerRect.left + triggerRect.width + translate[0],\n        triggerRect.top + translate[1],\n      ];\n    case PLACEMENT.RB:\n      return [\n        triggerRect.left + triggerRect.width + translate[0],\n        triggerRect.top + triggerRect.height - popWH.height + translate[1],\n      ];\n    default:\n      return [0, 0];\n  }\n}\n\nfunction getBoundaryPosition(position: PLACEMENT) {\n  switch (position) {\n    case PLACEMENT.T:\n    case PLACEMENT.TL:\n    case PLACEMENT.TR:\n      return PLACEMENT.T;\n    case PLACEMENT.B:\n    case PLACEMENT.BL:\n    case PLACEMENT.BR:\n      return PLACEMENT.B;\n    case PLACEMENT.L:\n    case PLACEMENT.LT:\n    case PLACEMENT.LB:\n      return PLACEMENT.L;\n    case PLACEMENT.R:\n    case PLACEMENT.RT:\n    case PLACEMENT.RB:\n      return PLACEMENT.R;\n    default:\n      return PLACEMENT.T;\n  }\n}\n\nfunction changePosition(\n  position: PLACEMENT,\n  direction: ReturnType<typeof getBoundaryPosition>,\n): PLACEMENT {\n  switch (direction) {\n    case PLACEMENT.T:\n      switch (position) {\n        case PLACEMENT.B:\n          return PLACEMENT.T;\n        case PLACEMENT.BL:\n          return PLACEMENT.TL;\n        case PLACEMENT.BR:\n          return PLACEMENT.TR;\n        default:\n          return position;\n      }\n    case PLACEMENT.B:\n      switch (position) {\n        case PLACEMENT.T:\n          return PLACEMENT.B;\n        case PLACEMENT.TL:\n          return PLACEMENT.BL;\n        case PLACEMENT.TR:\n          return PLACEMENT.BR;\n        default:\n          return position;\n      }\n    case PLACEMENT.L:\n      switch (position) {\n        case PLACEMENT.R:\n          return PLACEMENT.L;\n        case PLACEMENT.RT:\n          return PLACEMENT.LT;\n        case PLACEMENT.RB:\n          return PLACEMENT.LB;\n        default:\n          return position;\n      }\n    case PLACEMENT.R:\n      switch (position) {\n        case PLACEMENT.L:\n          return PLACEMENT.R;\n        case PLACEMENT.LT:\n          return PLACEMENT.RT;\n        case PLACEMENT.LB:\n          return PLACEMENT.RB;\n        default:\n          return position;\n      }\n    default:\n      return position;\n  }\n}\n\nfunction getFitPosition(\n  position: PLACEMENT,\n  popupPosition: number[],\n  containerRect: Rect,\n  popWH: Rect,\n  triggerRect: Rect,\n  translate: number[],\n  direction: PLACEMENT,\n  overflow?: boolean,\n) {\n  const viewPortSize = [\n    document.documentElement.clientWidth || window.innerWidth,\n    document.documentElement.clientHeight || window.innerHeight,\n  ];\n\n  const boundary = [\n    overflow ? Math.max(containerRect.left, 0) : 0,\n    overflow ? Math.max(containerRect.top, 0) : 0,\n    overflow ? Math.min(containerRect.left + containerRect.width, viewPortSize[0]) : viewPortSize[0],\n    overflow ? Math.min(containerRect.top + containerRect.height, viewPortSize[1]) : viewPortSize[1],\n  ];\n  const x = containerRect.left + popupPosition[0];\n  const y = containerRect.top + popupPosition[1];\n  const popRect = [\n    containerRect.left + popupPosition[0],\n    containerRect.top + popupPosition[1],\n    x + popWH.width,\n    y + popWH.height,\n  ];\n  const triggerX = containerRect.left + triggerRect.left;\n  const triggerY = containerRect.top + triggerRect.top;\n  const triggerEx = triggerX + triggerRect.width;\n  const triggerEy = triggerY + triggerRect.height;\n  let finalPosition = position;\n  if (direction === PLACEMENT.T) {\n    if (y < boundary[1]) {\n      if (boundary[3] - triggerEy + translate[1] >= popWH.height && triggerEy - translate[1] >= boundary[1]) {\n        popupPosition[1] = getPopupOffset(PLACEMENT.B, triggerRect, popWH, [translate[0], -translate[1]])[1];\n        finalPosition = changePosition(position, PLACEMENT.B);\n      } else {\n        popupPosition[1] = overflow ? 0 : -containerRect.top;\n      }\n    } else if (popRect[3] > boundary[3]) {\n      popupPosition[1] = overflow ? containerRect.height - popWH.height : viewPortSize[1] - containerRect.top - popWH.height;\n    }\n  } else if (direction === PLACEMENT.B) {\n    if (popRect[3] > boundary[3]) {\n      if (triggerY - boundary[1] - translate[1] >= popWH.height && triggerY - translate[1] <= boundary[3]) {\n        popupPosition[1] = getPopupOffset(PLACEMENT.T, triggerRect, popWH, [translate[0], -translate[1]])[1];\n        finalPosition = changePosition(position, PLACEMENT.T);\n      } else {\n        popupPosition[1] = overflow ? containerRect.height - popWH.height : viewPortSize[1] - containerRect.top - popWH.height;\n      }\n    } else if (y < boundary[1]) {\n      popupPosition[1] = overflow ? 0 : -containerRect.top;\n    }\n  } else if (direction === PLACEMENT.L) {\n    if (x < boundary[0]) {\n      if (boundary[2] - triggerEx + translate[0] >= popWH.width && triggerEx - translate[0] >= boundary[0]) {\n        finalPosition = changePosition(position, PLACEMENT.R);\n        popupPosition[0] = getPopupOffset(PLACEMENT.R, triggerRect, popWH, [-translate[0], translate[1]])[0];\n      } else {\n        popupPosition[0] = overflow ? 0 : -containerRect.left;\n      }\n    } else if (popRect[2] > boundary[2]) {\n      popupPosition[0] = overflow ? containerRect.width - popWH.width : viewPortSize[0] - containerRect.left + popWH.width;\n    }\n  } else if (direction === PLACEMENT.R) {\n    if (popRect[2] > boundary[2]) {\n      if (triggerX - boundary[0] - translate[0] >= popWH.width && triggerX - translate[0] <= boundary[2]) {\n        finalPosition = changePosition(position, PLACEMENT.L);\n        popupPosition[0] = getPopupOffset(PLACEMENT.L, triggerRect, popWH, [-translate[0], translate[1]])[0];\n      } else {\n        popupPosition[0] = overflow ? containerRect.width - popWH.width : viewPortSize[0] - containerRect.left + popWH.width;\n      }\n    } else if (x < boundary[0]) {\n      popupPosition[0] = overflow ? 0 : -containerRect.left;\n    }\n  }\n\n  if (direction === PLACEMENT.T || direction === PLACEMENT.B) {\n    if (x < boundary[0]) {\n      popupPosition[0] = overflow ? 0 : -containerRect.left;\n    } else if (popRect[2] > boundary[2]) {\n      popupPosition[0] = overflow ? containerRect.width - popWH.width : viewPortSize[0] - containerRect.left + popWH.width;\n    }\n  } else if (direction === PLACEMENT.L || direction === PLACEMENT.R) {\n    if (y < boundary[1]) {\n      popupPosition[1] = overflow ? 0 : -containerRect.top;\n    } else if (popRect[3] > boundary[3]) {\n      popupPosition[1] = overflow ? containerRect.height - popWH.height : viewPortSize[1] - containerRect.top - popWH.height;\n    }\n  }\n\n  return finalPosition;\n}\n\nfunction getPopStyle(\n  position: PLACEMENT,\n  containerRect: Rect,\n  triggerRect: Rect,\n  popWH: Rect,\n  translate: number[],\n  // eslint-disable-next-line default-param-last\n  autoFit = true,\n  overflow?: boolean,\n  coverTrigger?: boolean,\n  arrowWH?: Rect,\n  hideOnInvisible?: boolean,\n): Position {\n  const triggerOut = triggerRect.left >= containerRect.width\n  || triggerRect.top >= containerRect.height\n  || triggerRect.left + triggerRect.width <= 0\n  || triggerRect.top + triggerRect.height <= 0;\n\n  if (hideOnInvisible && triggerOut) {\n    return { position };\n  }\n\n  let der = getBoundaryPosition(position);\n  if (coverTrigger) {\n    translate = [...translate];\n    if (der === PLACEMENT.T) {\n      translate[1] += triggerRect.height;\n    } else if (der === PLACEMENT.B) {\n      translate[1] -= triggerRect.height;\n    } else if (der === PLACEMENT.L) {\n      translate[0] += triggerRect.width;\n    } else {\n      translate[0] -= triggerRect.width;\n    }\n  }\n\n  const popupPosition = getPopupOffset(position, triggerRect, popWH, translate);\n\n  if (autoFit) {\n    position = getFitPosition(\n      position,\n      popupPosition,\n      containerRect,\n      popWH,\n      triggerRect,\n      translate,\n      der,\n      overflow,\n    );\n  }\n\n  let arrowXY: undefined | number[];\n  if (!triggerOut && arrowWH) {\n    der = getBoundaryPosition(position);\n    arrowXY = [];\n    const half = [arrowWH.width / 2, arrowWH.height / 2];\n    const isL = der === PLACEMENT.L;\n    if (isL || der === PLACEMENT.R) {\n      arrowXY[1] = triggerRect.top + triggerRect.height / 2 - popupPosition[1] - half[1];\n      if (arrowXY[1] < half[1] || arrowXY[1] > popWH.height - arrowWH.height - half[1]) {\n        arrowXY = undefined;\n      } else {\n        arrowXY[0] = (isL ? popWH.width : 0) - half[0];\n      }\n    } else {\n      arrowXY[0] = triggerRect.left + triggerRect.width / 2 - popupPosition[0] - half[0];\n      if (arrowXY[0] < half[0] || arrowXY[0] > popWH.width - arrowWH.width - half[0]) {\n        arrowXY = undefined;\n      } else {\n        arrowXY[1] = (der === PLACEMENT.T ? popWH.height : 0) - half[1];\n      }\n    }\n  }\n\n  return {\n    xy: popupPosition,\n    arrowXY,\n    position,\n  };\n}\n\nfunction getTransitionInfo(el: Element): TransitionInfo {\n  const styles = window.getComputedStyle(el);\n  const getStyleProperties = (key: keyof typeof styles) => ((styles[key] || '') as any).split(', ');\n  const transitionDelays = getStyleProperties('transitionDelay');\n  const transitionDurations = getStyleProperties('transitionDuration');\n  const transitionTimeout = getTimeout(transitionDelays, transitionDurations);\n  const animationDelays = getStyleProperties('animationDelay');\n  const animationDurations = getStyleProperties('animationDuration');\n  const animationTimeout = getTimeout(animationDelays, animationDurations);\n\n  const timeout = Math.max(transitionTimeout, animationTimeout);\n\n  return {\n    event: timeout > 0 ? transitionTimeout > animationTimeout ? 'transitionend' : 'animationend' : undefined,\n    timeout,\n  };\n}\n\nfunction getTimeout(delays: string[], durations: string[]): number {\n  while (delays.length < durations.length) {\n    delays = delays.concat(delays);\n  }\n  return Math.max(...durations.map((d, i) => toMs(d) + toMs(delays[i])));\n}\n\nfunction toMs(s: string): number {\n  return Number(s.slice(0, -1).replace(',', '.')) * 1000;\n}\n\nfunction getContainerInfo(element: Element) {\n  const {\n    overflow, overflowX, overflowY, position,\n  } = window.getComputedStyle(element);\n  const o = overflow + overflowY + overflowX;\n  return {\n    clip: o.includes('hidden') || o.includes('clip'),\n    position,\n  };\n}\n\nfunction hideDom(el: HTMLElement) {\n  const { style } = el;\n  style.opacity = '0';\n  style.pointerEvents = 'none';\n}\nfunction showDom(el: HTMLElement) {\n  const { style } = el;\n  style.opacity = style.pointerEvents = '';\n}\n\nfunction isScrollElement(element: HTMLElement) {\n  return (\n    element.scrollHeight > element.offsetHeight\n    || element.scrollWidth > element.offsetWidth\n  );\n}\n\nfunction getScrollElements(el: HTMLElement, container: HTMLElement) {\n  const scrollElements: HTMLElement[] = [];\n  while (el && el !== container) {\n    if (isScrollElement(el)) {\n      scrollElements.push(el);\n    }\n    el = el.parentElement!;\n  }\n  if (scrollElements.length) return scrollElements;\n}\n","function throttle(fn, ctx) {\r\n    let pending = false;\r\n    let first = true;\r\n    let args = null;\r\n    return function () {\r\n        args = arguments;\r\n        if (first) {\r\n            first = false;\r\n            return fn.apply(ctx, args);\r\n        }\r\n        if (pending)\r\n            return;\r\n        pending = true;\r\n        requestAnimationFrame(() => {\r\n            fn.apply(ctx, args);\r\n            pending = false;\r\n        });\r\n    };\r\n}\n\nexport { throttle };\n","import { PopFlow } from '../src';\n\nwindow.onload = function () {\n  const container = document.querySelector('.container')! as HTMLElement;\n  const c = document.querySelector('.c')! as HTMLElement;\n  const btn = document.querySelector('#btn')! as HTMLElement;\n  const content = document.createElement('div');\n  content.classList.add('content');\n\n  const cbb = container.getBoundingClientRect();\n\n  c.scrollTop = (2000 - cbb.height) / 2 + 10;\n  c.scrollLeft = (2000 - cbb.width) / 2 + 10;\n  let popup;\n\n  btn.onclick = () => {\n    popup.toggle();\n  };\n\n  const arrow = document.createElement('div');\n  arrow.classList.add('arrow');\n\n  const config = {\n    container,\n    content,\n    trigger: btn,\n    autoPlacement: true,\n    autoUpdate: true,\n    autoScroll: true,\n    translate: [0, -10],\n    arrow,\n    cssName: 'fade',\n    placement: 't',\n  };\n\n  const initPopup = () => {\n    if (popup) popup.destroy();\n    popup = new PopFlow(config as any);\n    popup.toggle();\n  };\n\n  initPopup();\n  const selection = document.querySelector('.section') as HTMLElement;\n  selection.onchange = ({ target }) => {\n    const { name, value, checked } = target as any;\n    if (name === 'cb') {\n      if (value === 'arrow') {\n        config.arrow = (checked ? arrow : undefined) as any;\n      } else if (value === 'css') {\n        config.cssName = checked ? 'fade' : '';\n      } else {\n        config[value] = checked;\n      }\n      initPopup();\n    } else if (name === 'translateX') {\n      config.translate[0] = Number(value);\n      initPopup();\n    } else if (name === 'translateY') {\n      config.translate[1] = Number(value);\n      initPopup();\n    } else if (name === 'placement') {\n      config.placement = value;\n      initPopup();\n    }\n  };\n\n  const transXs = document.querySelector('.translate-x-s') as HTMLElement;\n  const transYs = document.querySelector('.translate-y-s') as HTMLElement;\n\n  selection.oninput = ({ target }) => {\n    const { name, value } = target as any;\n    if (name === 'translateX') {\n      transXs.textContent = `${value}px`;\n    } else if (name === 'translateY') {\n      transYs.textContent = `${value}px`;\n    }\n  };\n};\n"],"names":["PLACEMENT","isBrowser","window","options","Object","defineProperty","get","addEventListener","e","destroyableMap","Map","SELECTOR_REGEX","$","desc","attrs","children","classPrefix","arguments","length","undefined","match","exec","o","el","document","createElement","id","className","replace","concat","trim","keys","forEach","name","value","setAttribute","String","innerHTML","c","appendChild","addClass","dom","cls","prefix","classList","split","add","oldCls","baseVal","map","join","removeClass","remove","getConfig","config","_objectSpread","container","body","placement","T","autoPlacement","autoUpdate","autoScroll","translate","PopFlow","_this","fn","ctx","pending","first","args","_classCallCheck","this","opening","isAnimation","containerOF","popHide","arrowHide","onScroll","closeOnScroll","close","update","apply","requestAnimationFrame","onShowTransitionEnd","cssName","onEntered","enterActive","enterTo","onHideTransitionEnd","onExited","removeChild","cel","exitActive","exitTo","oldContainer","style","position","left","top","element","_window$getComputedSt","overflow","overflowX","overflowY","key","destroyable","_config","content","trigger","info","getComputedStyle","clip","includes","overflowHidden","isTriggerEl","Element","ro","ResizeObserver","observe","destroy","disconnect","has","set","push","scrollEls","scrollElements","isScrollElement","parentElement","getScrollElements","arrow","arrowEl","zIndex","enterFrom","exitFrom","open","_this$clearShow","_this$clearHide","cancelAnimationFrame","showRaf","hideRaf","clearShow","call","clearHide","removeScrollEv","item","delete","_this2","showing","fromHide","_this$scrollEls","x","passive","popBcr","getBoundingClientRect","containerBcr","arrowBcr","triggerBcr","width","height","onBeforeEnter","getTransitionInfo","showTransInfo","clear","promise","then","ret","containerRect","triggerRect","popWH","autoFit","coverTrigger","arrowWH","hideOnInvisible","triggerOut","der","getBoundaryPosition","_toConsumableArray","B","L","arrowXY","popupPosition","getPopupOffset","direction","viewPortSize","documentElement","clientWidth","innerWidth","clientHeight","innerHeight","boundary","Math","max","min","y","popRect","triggerX","triggerY","triggerEx","triggerEy","finalPosition","changePosition","R","getFitPosition","half","isL","xy","getPopStyle","onBeforePosition","onOpen","showDom","transform","hideDom","_this3","onClose","onBeforeExit","hideTransInfo","_this$scrollEls2","_this4","removeEventListener","Promise","resolve","_ref","styles","getStyleProperties","transitionDelays","transitionDurations","transitionTimeout","getTimeout","animationDelays","animationDurations","animationTimeout","timeout","event","_clear","timer","setTimeout","_clear2","clearTimeout","TL","TR","BL","BR","LT","LB","RT","RB","delays","durations","d","i","toMs","s","Number","slice","opacity","pointerEvents","scrollHeight","offsetHeight","scrollWidth","offsetWidth","onload","querySelector","btn","popup","cbb","scrollTop","scrollLeft","onclick","toggle","initPopup","selection","onchange","_ref2","target","checked","transXs","transYs","oninput","_ref3","textContent"],"mappings":"o3DAAA,ICAYA,WAAAA,GAAAA,OACVA,EAAI,EAAA,IACJA,EAAK,GAAA,KACLA,EAAK,GAAA,KACLA,EAAI,EAAA,IACJA,EAAK,GAAA,KACLA,EAAK,GAAA,KACLA,EAAI,EAAA,IACJA,EAAK,GAAA,KACLA,EAAK,GAAA,KACLA,EAAI,EAAA,IACJA,EAAK,GAAA,KACLA,EAAK,GAAA,KAZKA,CAAA,EAAAA,GAAA,CAAA,GCANC,EAA8B,oBAAXC,OCIzB,GAAID,EACA,IACI,IAAME,EAAUC,OAAOC,eAAe,CAAE,EAAE,OAAQ,CAAEC,gBAA6B,CAAK,IACtFJ,OAAOK,iBAAiB,OAAQ,KAAMJ,EAEzC,CACD,MAAOK,GAAM,CAkBjB,IAAMC,EAAiB,IAAIC,IC1B3B,IAAMC,EAAiB,6CACvB,SAASC,EAAEC,EAAMC,EAAOC,GAAU,IAAAC,EAAWC,UAAAC,OAAA,QAAAC,IAAAF,UAAAE,GAAAF,aAAG,GACxCG,EAAQ,GACRP,IACAO,EAAQT,EAAeU,KAAKR,IAAS,IACzC,ICNcS,EDMRC,EAAKC,SAASC,cAAcL,EAAM,IAAM,OA4B9C,OA3BIA,EAAM,KACNG,EAAGG,GAAKN,EAAM,IACdA,EAAM,KACNG,EAAGI,UAAYP,EAAM,GAAGQ,QAAQ,MAAK,IAAAC,OAAMb,IAAec,QAC1DhB,GACAV,OAAO2B,KAAKjB,GAAOkB,SAAQ,SAACC,GACxB,IAAMC,EAAQpB,EAAMmB,QACNd,IAAVe,IAES,aAATD,EACIC,GACAX,EAAGY,aAAaF,EAAM,QAI1BV,EAAGY,aAAaF,EAAMC,GAEtC,IAEQnB,ICzBgB,iBADNO,ED2BGP,IC1BeO,aAAac,OD2BrCb,EAAGc,UAAYtB,EAGfA,EAASiB,SAAQ,SAACM,GAAM,OAAAf,EAAGgB,YAAYD,OAGxCf,CACX,CAiBA,SAASiB,EAASC,GAA4B,IAAvBC,EAAGzB,UAAAC,eAAAC,IAAAF,UAAA,GAAAA,aAAG,GAAI0B,EAAM1B,UAAAC,OAAAD,QAAAE,IAAAF,aAAAA,UAAG,GAAA,GAEtC,KADAyB,EAAMA,EAAIZ,QAEN,OAAOW,EACX,GAAIA,EAAIG,UACJF,EAAIG,MAAM,KAAKb,SAAQ,SAACM,UAAMG,EAAIG,UAAUE,IAAIH,EAASL,EAAG,QAE3D,CACD,IAAMS,EAAUN,EAAId,WAAac,EAAId,UAAUqB,SAAY,GAC3DP,EAAIN,aAAa,SAAUY,KAAMlB,OAAMkB,EAAY,KAAA,IAAML,EAAIG,MAAM,KAAKI,KAAI,SAACX,GAAC,OAAKK,EAASL,CAAE,IAACY,KAAK,KACvG,CACD,OAAOT,CACX,CACA,SAASU,EAAYV,EAAKC,GAAK,IAAAC,EAAM1B,UAAAC,eAAAC,IAAAF,UAAA,GAAAA,aAAG,GAEpC,OADAwB,EAAIG,UAAUQ,OAAOT,EAASD,GACvBD,CACX,CE7DA,SAASY,EAAUC,GACV,sWAAAC,CAAA,CACLC,UAAWhC,SAASiC,KACpBC,UAAW1D,EAAU2D,EACrBC,eAAe,EACfC,YAAY,EACZC,YAAY,EACZC,UAAW,CAAC,EAAG,IACZT,EAEP,CAAA,IAEaU,EAA+B,WAqC1C,SAAAA,EAAYV,GAAuBW,ICzDnBC,EAAIC,EACdC,EACAC,EACAC,EDsD6BL,EAAAM,kGAAAA,MAAAP,GAhCzBQ,KAAAC,SAAA,EAEID,KAAAE,aAAA,EAkBdF,KAAQG,aAAc,EAQtBH,KAAQI,SAAU,EAElBJ,KAAQK,WAAY,EA8MpBL,KAAAM,UCrQgBZ,EDqQI,WACdD,EAAKX,OAAOyB,cACdd,EAAKe,QAELf,EAAKgB,QACP,ECzQIb,GAAU,EACVC,GAAQ,EACRC,EAAO,KACJ,WAEH,GADAA,EAAOrD,UACHoD,EAEA,OADAA,GAAQ,EACDH,EAAGgB,MAAMf,EAAKG,GAErBF,IAEJA,GAAU,EACVe,uBAAsB,WAClBjB,EAAGgB,MAAMf,EAAKG,GACdF,GAAU,CACtB,IACA,GD8REI,KAAQY,oBAAsB,WACtB,IAAEC,EAAgBpB,EAAhBoB,QAAS9D,EAAO0C,EAAP1C,GACT+D,EAAcrB,EAAKX,OAAnBgC,UACInC,EAAA5B,EAAI8D,EAASE,aACbpC,EAAA5B,EAAI8D,EAASG,SACzBvB,EAAKS,aAAc,EACfY,GAAqBA,GAAA,EAG3Bd,KAAQiB,oBAAsB,WAC5B,IAAQJ,EAAwBpB,EAAxBoB,QAAS/B,EAAeW,EAAfX,OAAQ/B,EAAO0C,EAAP1C,GACjBmE,EAAapC,EAAboC,SACDpC,EAAAE,UAAWmC,YAAY1B,EAAK2B,KACvBzC,EAAA5B,EAAI8D,EAASQ,YACb1C,EAAA5B,EAAI8D,EAASS,QACzB7B,EAAKS,aAAc,EACfgB,GAAmBA,GAAA,EArQvB,IAAMK,EAAezC,EAAOE,UACnBF,EAAAkB,KAAKlB,OAASD,EAAUC,GACjCkB,KAAKoB,IAAMhF,IACP,IAAEoF,EAAUxB,KAAKoB,IAAfI,MACNA,EAAMC,SAAW,WACXD,EAAAE,KAAOF,EAAMG,IAAM,IACnB,IAumBgBC,EAClBC,EACJC,EAAUC,EAAWC,EAAWP,EAE5B3E,EH3oBgBmF,EAAKC,EGgCnBC,EAEFrD,EADFsD,EAAAD,EAAAC,QAASpD,EAAAmD,EAAAnD,UAAWqD,EAAAF,EAAAE,QAASxB,EAAAsB,EAAAtB,QAEzByB,GAomBgBV,EApmBQ5C,EAqmB1B6C,EAEFnG,OAAO6G,iBAAiBX,GAD1BE,EAAAD,EAAAC,SAAUC,EAAAF,EAAAE,UAAWC,EAAAH,EAAAG,UAAWP,EAAAI,EAAAJ,SAG3B,CACLe,MAFI1F,EAAIgF,EAAWE,EAAYD,GAEvBU,SAAS,WAAa3F,EAAE2F,SAAS,QACzChB,SAAAA,IAhmBA,GAVAzB,KAAKG,YAAuC,MAAzBrB,EAAO4D,eAAyBJ,EAAKE,KAAO1D,EAAO4D,gBAClEnB,IAAiBe,EAAKb,UAA8B,WAAlBa,EAAKb,YACzCzC,EAAWwC,MAAMC,SAAW,YAG9BzB,KAAKjD,GAAKiD,KAAKoB,IAAIrD,YAAY3B,KAC1B4D,KAAAjD,GAAGyE,MAAMC,SAAW,WACpBzB,KAAAjD,GAAGgB,YAAYqE,GAEpBpC,KAAK2C,YAAcN,aAAmBO,QAClC9D,EAAOO,WAAY,CACrB,IAAMwD,EAAK,IAAIC,gBAAe,WAAA,OAAMrD,EAAKgB,QAAQ,IACjDoC,EAAGE,QAAQX,GACXS,EAAGE,QAAQ/D,GACPgB,KAAK2C,aAAaE,EAAGE,QAAQV,GHlDfJ,EGmDHjC,KHnDQkC,EGmDF,CAAEc,QAAS,kBAAMH,EAAGI,eHlDtChH,EAAeiH,IAAIjB,IACpBhG,EAAekH,IAAIlB,EAAK,IAC5BhG,EAAeH,IAAImG,GAAKmB,KAAKlB,EGiD7B,CAEIlC,KAAK2C,aAAe3D,IAAcF,EAAOQ,YAAcR,EAAOyB,iBAC3DP,KAAAqD,UA4mBX,SAA2BtG,EAAiBiC,GAC1C,IAAMsE,EAAgC,GAC/B,KAAAvG,GAAMA,IAAOiC,GACduE,EAAgBxG,IAClBuG,EAAeF,KAAKrG,GAEtBA,EAAKA,EAAGyG,cAEV,GAAIF,EAAe5G,OAAe,OAAA4G,CACpC,CArnBuBG,CAAkBpB,EAAwBrD,IAGzDF,EAAO4E,QACT1D,KAAK2D,QAAUvH,KACfoF,EAAQxB,KAAK2D,QAAQnC,OACfC,SAAW,WACXD,EAAAE,KAAOF,EAAMG,IAAM,IACzBH,EAAMoC,OAAS,KACV5D,KAAA2D,QAAQ5F,YAAYe,EAAO4E,OAC3B1D,KAAAjD,GAAGgB,YAAYiC,KAAK2D,UAGvB9C,IACFb,KAAKa,QAAU,CACbgD,oBAAchD,EAAA,eACdE,sBAAgBF,EAAA,iBAChBG,kBAAYH,EAAA,aACZiD,mBAAajD,gBACbQ,qBAAeR,EAAA,gBACfS,iBAAWT,eAGjB,oBAAArB,MAAAyC,IAAA,SAAAvE,MAEA,WACMsC,KAAKC,UAAYD,KAAKE,aAAaF,KAAK+D,MAC9C,IAAA9B,IAAA,UAAAvE,MAEA,eAAUsG,EAAAC,EHtEKhC,EGuELjD,EAAcgB,KAAKlB,OAAnBE,UACR,GAAIgB,KAAKC,QACH,IACSjB,EAAAmC,YAAYnB,KAAKoB,WACrBpF,GAET,CAEFkI,qBAAqBlE,KAAKmE,SAC1BD,qBAAqBlE,KAAKoE,SACT,QAAjBJ,EAAAhE,KAAKqE,iBAALL,IAAiBA,GAAjBA,EAAAM,KAAAtE,MACiB,QAAjBiE,EAAAjE,KAAKuE,iBAALN,IAAiBA,GAAjBA,EAAAK,WACAtE,KAAKE,aAAc,EACnBF,KAAKC,SAAU,EACfD,KAAKwE,iBHrFQvC,EGsFLjC,KHrFJ/D,EAAeiH,IAAIjB,KACnBhG,EAAeH,IAAImG,GAAKzE,SAAQ,SAACiH,GAAS,OAAAA,EAAKzB,SAAU,IACzD/G,EAAeyI,OAAOzC,GGoF5B,GAAAA,CAAAA,WAAAvE,MAEA,WAAOiH,IAAAA,OAEH7F,EACEkB,KADFlB,OAAQ+B,EACNb,KADMa,QAAkB+D,EACxB5E,KADeC,QAAkBlD,EACjCiD,KADiCjD,GAAI4G,EACrC3D,KADqC2D,QAEjC3E,EAAuBF,EAAvBE,UAAWqD,EAAYvD,EAAZuD,QACbwC,GAAYD,EAClB,GAAIC,EAAU,CAAAC,IAAAA,EACZ,GAAI9E,KAAKE,YAAa,OACXlB,EAAAjB,YAAYiC,KAAKoB,KACvB,QAAA0D,EAAA9E,KAAAqD,iBAAAyB,IAAAA,GAAAA,EAAWtH,SAAQ,SAACuH,GACvBA,EAAEhJ,iBAAiB,SAAU4I,EAAKrE,SAAU,CAAE0E,SAAS,GAAM,GAEjE,CACAhF,KAAKC,SAAU,EACT,IAAAgF,EAASlI,EAAGmI,wBACZC,EAAenG,EAAWkG,wBAC1BE,EAAWzB,eAAAA,EAASuB,wBACtBG,EAAahD,EAAQ6C,wBAYzB,GAVIlF,KAAK2C,cACM0C,EAAA,CACX3D,KAAM2D,EAAW3D,KAAOyD,EAAazD,KACrCC,IAAK0D,EAAW1D,IAAMwD,EAAaxD,IACnC2D,MAAOD,EAAWC,MAClBC,OAAQF,EAAWE,SAIvBvF,KAAKE,aAAc,EACf2E,GAAYhE,EAAS,CACjB,IAAE2E,EAAkB1G,EAAlB0G,cACJA,GAA6BA,IACxBxH,EAAAjB,EAAI8D,EAAQgD,WAChB7D,KAAAmE,QAAUxD,uBAAsB,WACvBhC,EAAA5B,EAAI8D,EAAQgD,WACf7F,EAAAjB,EAAI8D,EAAQE,aACZ/C,EAAAjB,EAAI8D,EAAQG,SACrB,IAAMsB,EAAOqC,EAAKc,kBAAkB1I,EAAI4H,EAAKe,eAC7Cf,EAAKe,cAAgBpD,EAAKA,KAC1BqC,EAAKN,UAAY/B,EAAKqD,MACjBrD,EAAAsD,QAAQC,KAAKlB,EAAK/D,oBAAmB,GAC3C,MAEDD,uBAAsB,WACpBgE,EAAKzE,aAAc,CAAA,IAIvB,IAAM4F,EAkYV,SACErE,EACAsE,EACAC,EACAC,EACA1G,GAEA,IAAA2G,IAAAzJ,UAAAC,eAAAC,IAAAF,UAAA,KAAAA,aACAqF,EAAArF,UAAAC,OAAAD,EAAAA,kBAAAE,EACAwJ,EACA1J,UAAAC,OAAAD,EAAAA,kBAAAE,EAAAyJ,EAAA3J,UAAAC,OAAAD,EAAAA,kBAAAE,EACA0J,EACU5J,UAAAC,OAAAD,EAAAA,kBAAAE,EACJ2J,EAAaN,EAAYtE,MAAQqE,EAAcT,OAClDU,EAAYrE,KAAOoE,EAAcR,QACjCS,EAAYtE,KAAOsE,EAAYV,OAAS,GACxCU,EAAYrE,IAAMqE,EAAYT,QAAU,EAE3C,GAAIc,GAAmBC,EACrB,MAAO,CAAE7E,SAAAA,GAGP,IAAA8E,EAAMC,EAAoB/E,GAC1B0E,IACU5G,EAAAkH,EAAIlH,GACZgH,IAAQ/K,EAAU2D,EACpBI,EAAU,IAAMyG,EAAYT,OACnBgB,IAAQ/K,EAAUkL,EAC3BnH,EAAU,IAAMyG,EAAYT,OACnBgB,IAAQ/K,EAAUmL,EAC3BpH,EAAU,IAAMyG,EAAYV,MAE5B/F,EAAU,IAAMyG,EAAYV,OAIhC,IAeIsB,EAfEC,EAAgBC,EAAerF,EAAUuE,EAAaC,EAAO1G,GAgB/D,GAdA2G,IACSzE,EAxIf,SACEA,EACAoF,EACAd,EACAE,EACAD,EACAzG,EACAwH,EACAjF,GAEA,IAAMkF,EAAe,CACnBhK,SAASiK,gBAAgBC,aAAexL,OAAOyL,WAC/CnK,SAASiK,gBAAgBG,cAAgB1L,OAAO2L,aAG5CC,EAAW,CACfxF,EAAWyF,KAAKC,IAAIzB,EAAcrE,KAAM,GAAK,EAC7CI,EAAWyF,KAAKC,IAAIzB,EAAcpE,IAAK,GAAK,EAC5CG,EAAWyF,KAAKE,IAAI1B,EAAcrE,KAAOqE,EAAcT,MAAO0B,EAAa,IAAMA,EAAa,GAC9FlF,EAAWyF,KAAKE,IAAI1B,EAAcpE,IAAMoE,EAAcR,OAAQyB,EAAa,IAAMA,EAAa,IAE1FjC,EAAIgB,EAAcrE,KAAOmF,EAAc,GACvCa,EAAI3B,EAAcpE,IAAMkF,EAAc,GACtCc,EAAU,CACd5B,EAAcrE,KAAOmF,EAAc,GACnCd,EAAcpE,IAAMkF,EAAc,GAClC9B,EAAIkB,EAAMX,MACVoC,EAAIzB,EAAMV,QAENqC,EAAW7B,EAAcrE,KAAOsE,EAAYtE,KAC5CmG,EAAW9B,EAAcpE,IAAMqE,EAAYrE,IAC3CmG,EAAYF,EAAW5B,EAAYV,MACnCyC,EAAYF,EAAW7B,EAAYT,OACrCyC,EAAgBvG,EA6Db,OA5DHsF,IAAcvL,EAAU2D,EACtBuI,EAAIJ,EAAS,GACXA,EAAS,GAAKS,EAAYxI,EAAU,IAAM0G,EAAMV,QAAUwC,EAAYxI,EAAU,IAAM+H,EAAS,IACjGT,EAAc,GAAKC,EAAetL,EAAUkL,EAAGV,EAAaC,EAAO,CAAC1G,EAAU,IAAKA,EAAU,KAAK,GAClFyI,EAAAC,EAAexG,EAAUjG,EAAUkL,IAEnDG,EAAc,GAAK/E,EAAW,GAAKiE,EAAcpE,IAE1CgG,EAAQ,GAAKL,EAAS,KACjBT,EAAA,GAAK/E,EAAWiE,EAAcR,OAASU,EAAMV,OAASyB,EAAa,GAAKjB,EAAcpE,IAAMsE,EAAMV,QAEzGwB,IAAcvL,EAAUkL,EAC7BiB,EAAQ,GAAKL,EAAS,GACpBO,EAAWP,EAAS,GAAK/H,EAAU,IAAM0G,EAAMV,QAAUsC,EAAWtI,EAAU,IAAM+H,EAAS,IAC/FT,EAAc,GAAKC,EAAetL,EAAU2D,EAAG6G,EAAaC,EAAO,CAAC1G,EAAU,IAAKA,EAAU,KAAK,GAClFyI,EAAAC,EAAexG,EAAUjG,EAAU2D,IAErC0H,EAAA,GAAK/E,EAAWiE,EAAcR,OAASU,EAAMV,OAASyB,EAAa,GAAKjB,EAAcpE,IAAMsE,EAAMV,OAEzGmC,EAAIJ,EAAS,KACtBT,EAAc,GAAK/E,EAAW,GAAKiE,EAAcpE,KAE1CoF,IAAcvL,EAAUmL,EAC7B5B,EAAIuC,EAAS,GACXA,EAAS,GAAKQ,EAAYvI,EAAU,IAAM0G,EAAMX,OAASwC,EAAYvI,EAAU,IAAM+H,EAAS,IAChFU,EAAAC,EAAexG,EAAUjG,EAAU0M,GACnDrB,EAAc,GAAKC,EAAetL,EAAU0M,EAAGlC,EAAaC,EAAO,EAAE1G,EAAU,GAAIA,EAAU,KAAK,IAElGsH,EAAc,GAAK/E,EAAW,GAAKiE,EAAcrE,KAE1CiG,EAAQ,GAAKL,EAAS,KACjBT,EAAA,GAAK/E,EAAWiE,EAAcT,MAAQW,EAAMX,MAAQ0B,EAAa,GAAKjB,EAAcrE,KAAOuE,EAAMX,OAExGyB,IAAcvL,EAAU0M,IAC7BP,EAAQ,GAAKL,EAAS,GACpBM,EAAWN,EAAS,GAAK/H,EAAU,IAAM0G,EAAMX,OAASsC,EAAWrI,EAAU,IAAM+H,EAAS,IAC9EU,EAAAC,EAAexG,EAAUjG,EAAUmL,GACnDE,EAAc,GAAKC,EAAetL,EAAUmL,EAAGX,EAAaC,EAAO,EAAE1G,EAAU,GAAIA,EAAU,KAAK,IAEpFsH,EAAA,GAAK/E,EAAWiE,EAAcT,MAAQW,EAAMX,MAAQ0B,EAAa,GAAKjB,EAAcrE,KAAOuE,EAAMX,MAExGP,EAAIuC,EAAS,KACtBT,EAAc,GAAK/E,EAAW,GAAKiE,EAAcrE,OAIjDqF,IAAcvL,EAAU2D,GAAK4H,IAAcvL,EAAUkL,EACnD3B,EAAIuC,EAAS,GACfT,EAAc,GAAK/E,EAAW,GAAKiE,EAAcrE,KACxCiG,EAAQ,GAAKL,EAAS,KACjBT,EAAA,GAAK/E,EAAWiE,EAAcT,MAAQW,EAAMX,MAAQ0B,EAAa,GAAKjB,EAAcrE,KAAOuE,EAAMX,OAExGyB,IAAcvL,EAAUmL,GAAKI,IAAcvL,EAAU0M,IAC1DR,EAAIJ,EAAS,GACfT,EAAc,GAAK/E,EAAW,GAAKiE,EAAcpE,IACxCgG,EAAQ,GAAKL,EAAS,KACjBT,EAAA,GAAK/E,EAAWiE,EAAcR,OAASU,EAAMV,OAASyB,EAAa,GAAKjB,EAAcpE,IAAMsE,EAAMV,SAI7GyC,CACT,CAyCeG,CACT1G,EACAoF,EACAd,EACAE,EACAD,EACAzG,EACAgH,EACAzE,KAKCwE,GAAcF,EAAS,CAC1BG,EAAMC,EAAoB/E,GAC1BmF,EAAU,GACV,IAAMwB,EAAO,CAAChC,EAAQd,MAAQ,EAAGc,EAAQb,OAAS,GAC5C8C,EAAM9B,IAAQ/K,EAAUmL,EAC1B0B,GAAO9B,IAAQ/K,EAAU0M,GACnBtB,EAAA,GAAKZ,EAAYrE,IAAMqE,EAAYT,OAAS,EAAIsB,EAAc,GAAKuB,EAAK,GAC5ExB,EAAQ,GAAKwB,EAAK,IAAMxB,EAAQ,GAAKX,EAAMV,OAASa,EAAQb,OAAS6C,EAAK,GAClExB,OAAA,EAEVA,EAAQ,IAAMyB,EAAMpC,EAAMX,MAAQ,GAAK8C,EAAK,KAGtCxB,EAAA,GAAKZ,EAAYtE,KAAOsE,EAAYV,MAAQ,EAAIuB,EAAc,GAAKuB,EAAK,GAC5ExB,EAAQ,GAAKwB,EAAK,IAAMxB,EAAQ,GAAKX,EAAMX,MAAQc,EAAQd,MAAQ8C,EAAK,GAChExB,OAAA,EAEVA,EAAQ,IAAML,IAAQ/K,EAAU2D,EAAI8G,EAAMV,OAAS,GAAK6C,EAAK,GAGnE,CAEO,MAAA,CACLE,GAAIzB,EACJD,QAAAA,EACAnF,SAAAA,EAEJ,CAjdgB8G,CACVzJ,EAAOI,UACPiG,EACAE,EACAJ,EACAnG,EAAOS,UACPT,EAAOM,cACPY,KAAKG,YACLrB,EAAOqH,aACPf,EACAtG,EAAOuH,iBAGDmC,EAA6B1J,EAA7B0J,iBAAkBC,EAAW3J,EAAX2J,OACtBD,GAAkBA,EAAiB1C,GAEnCA,EAAIwC,IACFtI,KAAKI,UACPJ,KAAKI,SAAU,EACfsI,EAAQ1I,KAAKoB,MAEVpB,KAAAoB,IAAII,MAAMmH,UAAY,eAAAtL,OAAeyI,EAAIwC,GAAG,UAAAjL,OAAQyI,EAAIwC,GAAG,GAAA,UACtDtI,KAAKI,UACfwI,EAAQ5I,KAAKoB,KACbpB,KAAKI,SAAU,GAEbuD,IACEmC,EAAIc,SACF5G,KAAKK,YACPL,KAAKK,WAAY,EACjBqI,EAAQ/E,IAEVA,EAAQnC,MAAMmH,UAAYtL,aAAAA,OAAayI,EAAIc,QAAQ,GAAA,OAAAvJ,OAAQyI,EAAIc,QAAQ,WAC7D5G,KAAKK,YACfL,KAAKK,WAAY,EACjBuI,EAAQjF,KAIRkB,GAAY4D,GAAeA,GACjC,GAAA,CAAAxG,IAAAvE,QAAAA,MAEA,WAAQ,IAAAmL,EACF7I,KAAA,IAAAA,KAAKE,aAAgBF,KAAKC,QAA1B,CACJD,KAAKC,SAAU,EAEf,IAAQnB,EAAwBkB,KAAxBlB,OAAQ+B,EAAgBb,KAAhBa,QAAS9D,EAAOiD,KAAPjD,GACjB+L,EAAYhK,EAAZgK,QACR,GAAIjI,EAAS,CACL,IAAEkI,EAAiBjK,EAAjBiK,aACJA,GAA2BA,IACtB/K,EAAAjB,EAAI8D,EAAQiD,UACrB9D,KAAKE,aAAc,EACdF,KAAAoE,QAAUzD,uBAAsB,WACvBhC,EAAA5B,EAAI8D,EAAQiD,UACf9F,EAAAjB,EAAI8D,EAAQQ,YACZrD,EAAAjB,EAAI8D,EAAQS,QACrB,IAAMgB,EAAOuG,EAAKpD,kBAAkB1I,EAAI8L,EAAKG,eAC7CH,EAAKG,cAAgB1G,EAAKA,KAC1BuG,EAAKtE,UAAYjC,EAAKqD,MACjBrD,EAAAsD,QAAQC,KAAKgD,EAAK5H,oBAAmB,GAC3C,MAEMnC,EAAAE,UAAWmC,YAAYnB,KAAKoB,KAGrCpB,KAAKwE,iBACDsE,GAAiBA,GAvBrB,CAwBF,GAAA7G,CAAAA,aAAAvE,MAEA,WACMsC,KAAKC,QACPD,KAAKQ,QAELR,KAAK+D,MAET,IAAA9B,IAAA,iBAAAvE,MAUQ,eAAiBuL,EAAAC,EAClBlJ,KAAA,QAAAiJ,EAAAjJ,KAAAqD,iBAAA4F,IAAAA,GAAAA,EAAWzL,SAAQ,SAACuH,UAAMA,EAAEoE,oBAAoB,SAAUD,EAAK5I,SAAS,GAC/E,GAAA2B,CAAAA,wBAAAvE,MAEQ,SAAkBX,EAAauF,GACjC,IAAAqD,EAsBG,MAAA,CACLC,QAtBc,IAAIwD,SAAQ,SAACC,GAC3B,IAAAC,EAA2BhH,GAsXjC,SAA2BvF,GACnB,IAAAwM,EAAS7N,OAAO6G,iBAAiBxF,GACjCyM,EAAqB,SAACvH,UAA+BsH,EAAOtH,IAAQ,IAAY5D,MAAM,KACtF,EAAAoL,EAAmBD,EAAmB,mBACtCE,EAAsBF,EAAmB,sBACzCG,EAAoBC,EAAWH,EAAkBC,GACjDG,EAAkBL,EAAmB,kBACrCM,EAAqBN,EAAmB,qBACxCO,EAAmBH,EAAWC,EAAiBC,GAE/CE,EAAUzC,KAAKC,IAAImC,EAAmBI,GAErC,MAAA,CACLE,MAAOD,EAAU,EAAIL,EAAoBI,EAAmB,gBAAkB,oBAAiB,EAC/FC,QAAAA,EAEJ,CAtYyCvE,CAAkB1I,GAA7CkN,EAAOX,EAAPW,MAAOD,EAAAV,EAAAU,QACf,GAAIA,EAAS,CACX,IAAMtK,EAAK,WAAMwK,IAAAA,EACP,QAAAA,EAAAvE,SAAAuE,IAAAA,GAAAA,IACRb,EAAQ,KAAI,EAEXtM,EAAAhB,iBAAiBkO,EAAQvK,GACtB,IAAAyK,EAAQC,YAAW,eAAMC,EACrB,QAAAA,EAAA1E,SAAA0E,IAAAA,GAAAA,IACRhB,EAAQ,KAAI,GACXW,EAAU,GACbrE,EAAQ,WACN2E,aAAaH,GACVpN,EAAAoM,oBAAoBc,EAAQvK,EAAE,CACnC,MAEAiB,sBAAsB0I,EACxB,IAKA1D,MAAAA,EACArD,KAAAA,EAEJ,qFAAA9C,CAAA,CAzR0C,GA+S5C,SAASsH,EACPrF,EACAuE,EACAC,EACA1G,GAEQ,OAAAkC,GAAA,KACDjG,EAAU2D,EACN,MAAA,CACL6G,EAAYtE,KAAOsE,EAAYV,MAAQ,EAAIW,EAAMX,MAAQ,EAAI/F,EAAU,GACvEyG,EAAYrE,IAAMsE,EAAMV,OAAShG,EAAU,IAC7C,KACG/D,EAAU+O,GACN,MAAA,CACLvE,EAAYtE,KAAOnC,EAAU,GAC7ByG,EAAYrE,IAAMsE,EAAMV,OAAShG,EAAU,IAC7C,KACG/D,EAAUgP,GACN,MAAA,CACLxE,EAAYtE,KAAOsE,EAAYV,MAAQW,EAAMX,MAAQ/F,EAAU,GAC/DyG,EAAYrE,IAAMsE,EAAMV,OAAShG,EAAU,IAC7C,KACG/D,EAAUkL,EACN,MAAA,CACLV,EAAYtE,KAAOsE,EAAYV,MAAQ,EAAIW,EAAMX,MAAQ,EAAI/F,EAAU,GACvEyG,EAAYrE,IAAMqE,EAAYT,OAAShG,EAAU,IACnD,KACG/D,EAAUiP,GACN,MAAA,CACLzE,EAAYtE,KAAOnC,EAAU,GAC7ByG,EAAYrE,IAAMqE,EAAYT,OAAShG,EAAU,IACnD,KACG/D,EAAUkP,GACN,MAAA,CACL1E,EAAYtE,KAAOsE,EAAYV,MAAQW,EAAMX,MAAQ/F,EAAU,GAC/DyG,EAAYrE,IAAMqE,EAAYT,OAAShG,EAAU,IACnD,KACG/D,EAAUmL,EACN,MAAA,CACLX,EAAYtE,KAAOuE,EAAMX,MAAQ/F,EAAU,GAC3CyG,EAAYrE,IAAMqE,EAAYT,OAAS,EAAIU,EAAMV,OAAS,EAAIhG,EAAU,IAC1E,KACG/D,EAAUmP,GACN,MAAA,CACL3E,EAAYtE,KAAOuE,EAAMX,MAAQ/F,EAAU,GAC3CyG,EAAYrE,IAAMpC,EAAU,IAC9B,KACG/D,EAAUoP,GACN,MAAA,CACL5E,EAAYtE,KAAOuE,EAAMX,MAAQ/F,EAAU,GAC3CyG,EAAYrE,IAAMqE,EAAYT,OAASU,EAAMV,OAAShG,EAAU,IAClE,KACG/D,EAAU0M,EACN,MAAA,CACLlC,EAAYtE,KAAOsE,EAAYV,MAAQ/F,EAAU,GACjDyG,EAAYrE,IAAMqE,EAAYT,OAAS,EAAIU,EAAMV,OAAS,EAAIhG,EAAU,IAC1E,KACG/D,EAAUqP,GACN,MAAA,CACL7E,EAAYtE,KAAOsE,EAAYV,MAAQ/F,EAAU,GACjDyG,EAAYrE,IAAMpC,EAAU,IAC9B,KACG/D,EAAUsP,GACN,MAAA,CACL9E,EAAYtE,KAAOsE,EAAYV,MAAQ/F,EAAU,GACjDyG,EAAYrE,IAAMqE,EAAYT,OAASU,EAAMV,OAAShG,EAAU,IAClE,QAEO,MAAA,CAAC,EAAG,GAEjB,CAEA,SAASiH,EAAoB/E,GACnB,OAAAA,GAAA,KACDjG,EAAU2D,EAAA,KACV3D,EAAU+O,GAAA,KACV/O,EAAUgP,GACb,OAAOhP,EAAU2D,EAAA,KACd3D,EAAUkL,EAAA,KACVlL,EAAUiP,GAAA,KACVjP,EAAUkP,GACb,OAAOlP,EAAUkL,EAAA,KACdlL,EAAUmL,EAAA,KACVnL,EAAUmP,GAAA,KACVnP,EAAUoP,GACb,OAAOpP,EAAUmL,EAAA,KACdnL,EAAU0M,EAAA,KACV1M,EAAUqP,GAAA,KACVrP,EAAUsP,GACb,OAAOtP,EAAU0M,EAAA,QAEjB,OAAO1M,EAAU2D,EAEvB,CAEA,SAAS8I,EACPxG,EACAsF,GAEQ,OAAAA,GAAA,KACDvL,EAAU2D,EACL,OAAAsC,GAAA,KACDjG,EAAUkL,EACb,OAAOlL,EAAU2D,EAAA,KACd3D,EAAUiP,GACb,OAAOjP,EAAU+O,GAAA,KACd/O,EAAUkP,GACb,OAAOlP,EAAUgP,GAAA,QAEV,OAAA/I,EAAA,KAERjG,EAAUkL,EACL,OAAAjF,GAAA,KACDjG,EAAU2D,EACb,OAAO3D,EAAUkL,EAAA,KACdlL,EAAU+O,GACb,OAAO/O,EAAUiP,GAAA,KACdjP,EAAUgP,GACb,OAAOhP,EAAUkP,GAAA,QAEV,OAAAjJ,EAAA,KAERjG,EAAUmL,EACL,OAAAlF,GAAA,KACDjG,EAAU0M,EACb,OAAO1M,EAAUmL,EAAA,KACdnL,EAAUqP,GACb,OAAOrP,EAAUmP,GAAA,KACdnP,EAAUsP,GACb,OAAOtP,EAAUoP,GAAA,QAEV,OAAAnJ,EAAA,KAERjG,EAAU0M,EACL,OAAAzG,GAAA,KACDjG,EAAUmL,EACb,OAAOnL,EAAU0M,EAAA,KACd1M,EAAUmP,GACb,OAAOnP,EAAUqP,GAAA,KACdrP,EAAUoP,GACb,OAAOpP,EAAUsP,GAAA,QAEV,OAAArJ,EAAA,QAGJ,OAAAA,EAEb,CAsMA,SAASmI,EAAWmB,EAAkBC,GAC7B,KAAAD,EAAOrO,OAASsO,EAAUtO,QACtBqO,EAAAA,EAAO1N,OAAO0N,GAEzB,OAAOxD,KAAKC,IAAA9G,MAAL6G,KAAKd,EAAOuE,EAAUvM,KAAI,SAACwM,EAAGC,GAAM,OAAAC,EAAKF,GAAKE,EAAKJ,EAAOG,GAAI,KACvE,CAEA,SAASC,EAAKC,GACL,OAA2C,IAA3CC,OAAOD,EAAEE,MAAM,GAAG,GAAIlO,QAAQ,IAAK,KAC5C,CAaA,SAASwL,EAAQ7L,GACT,IAAEyE,EAAUzE,EAAVyE,MACRA,EAAM+J,QAAU,IAChB/J,EAAMgK,cAAgB,MACxB,CACA,SAAS9C,EAAQ3L,GACT,IAAEyE,EAAUzE,EAAVyE,MACFA,EAAA+J,QAAU/J,EAAMgK,cAAgB,EACxC,CAEA,SAASjI,EAAgB3B,GACvB,OACEA,EAAQ6J,aAAe7J,EAAQ8J,cAC5B9J,EAAQ+J,YAAc/J,EAAQgK,WAErC,CE/rBAlQ,OAAOmQ,OAAS,WACR,IAAA7M,EAAYhC,SAAS8O,cAAc,cACnChO,EAAId,SAAS8O,cAAc,MAC3BC,EAAM/O,SAAS8O,cAAc,QAC7B1J,EAAUpF,SAASC,cAAc,OAC/BmF,EAAAhE,UAAUE,IAAI,WAEhB,IAIF0N,EAJEC,EAAMjN,EAAUkG,wBAEtBpH,EAAEoO,WAAa,IAAOD,EAAI1G,QAAU,EAAI,GACxCzH,EAAEqO,YAAc,IAAOF,EAAI3G,OAAS,EAAI,GAGxCyG,EAAIK,QAAU,WACZJ,EAAMK,QAAO,EAGT,IAAA3I,EAAQ1G,SAASC,cAAc,OAC/ByG,EAAAtF,UAAUE,IAAI,SAEpB,IAAMQ,EAAS,CACbE,UAAAA,EACAoD,QAAAA,EACAC,QAAS0J,EACT3M,eAAe,EACfC,YAAY,EACZC,YAAY,EACZC,UAAW,CAAC,GAAM,IAClBmE,MAAAA,EACA7C,QAAS,OACT3B,UAAW,KAGPoN,EAAY,WACZN,GAAOA,EAAMhJ,WACTgJ,EAAA,IAAIxM,EAAQV,IACduN,QAAO,EAGLC,IACJ,IAAAC,EAAYvP,SAAS8O,cAAc,YACzCS,EAAUC,SAAW,SAAAC,GAAgB,IAAbC,EAAAD,EAAAC,OACdjP,EAAyBiP,EAAzBjP,KAAMC,EAAmBgP,EAAnBhP,MAAOiP,EAAYD,EAAZC,QACR,OAATlP,GACY,UAAVC,EACKoB,EAAA4E,MAASiJ,EAAUjJ,OAAQ,EACf,QAAVhG,EACFoB,EAAA+B,QAAU8L,EAAU,OAAS,GAEpC7N,EAAOpB,GAASiP,EAERL,KACQ,eAAT7O,GACFqB,EAAAS,UAAU,GAAK8L,OAAO3N,GACnB4O,KACQ,eAAT7O,GACFqB,EAAAS,UAAU,GAAK8L,OAAO3N,GACnB4O,KACQ,cAAT7O,IACTqB,EAAOI,UAAYxB,EACT4O,IACZ,EAGI,IAAAM,EAAU5P,SAAS8O,cAAc,kBACjCe,EAAU7P,SAAS8O,cAAc,kBAEvCS,EAAUO,QAAU,SAAAC,GAAgB,IAAbL,EAAAK,EAAAL,OACbjP,EAAgBiP,EAAhBjP,KAAMC,EAAUgP,EAAVhP,MACD,eAATD,EACFmP,EAAQI,sBAAiBtP,EAAA,MACP,eAATD,IACToP,EAAQG,sBAAiBtP,EAAA,MAC3B,CAEJ"}